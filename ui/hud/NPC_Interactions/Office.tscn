[gd_scene load_steps=24 format=2]

[ext_resource path="res://assets/achievement_icons/XIcon.png" type="Texture" id=1]
[ext_resource path="res://assets/fonts/upheavtt_80.tres" type="DynamicFont" id=2]
[ext_resource path="res://scripts/Office.gd" type="Script" id=3]
[ext_resource path="res://assets/office/Office.png" type="Texture" id=4]
[ext_resource path="res://assets/characters/Teacher3.png" type="Texture" id=5]
[ext_resource path="res://assets/characters/Teacher2.png" type="Texture" id=6]
[ext_resource path="res://assets/characters/Teacher1.png" type="Texture" id=7]
[ext_resource path="res://assets/characters/Teacher4.png" type="Texture" id=8]
[ext_resource path="res://assets/characters/Teacher5.png" type="Texture" id=9]
[ext_resource path="res://assets/fonts/upheavtt_24.tres" type="DynamicFont" id=10]
[ext_resource path="res://assets/fonts/upheavtt_40.tres" type="DynamicFont" id=11]
[ext_resource path="res://ui/CharacterCards/DisplayUnlockedCharacterCards.gd" type="Script" id=12]
[ext_resource path="res://ui/hud/NPC_Interactions/DisplayActiveSensors.gd" type="Script" id=13]
[ext_resource path="res://assets/office/phone_regular.png" type="Texture" id=14]
[ext_resource path="res://assets/office/phone_hover.png" type="Texture" id=15]

[sub_resource type="Shader" id=16]
code = "shader_type canvas_item;

uniform float value = 1.0;

void fragment() {
	COLOR = texture(TEXTURE, UV);
	if (value != 1.0) {
		if (COLOR.r > 0.3 && COLOR.b > 0.3 && COLOR.g > 0.3) {
			COLOR.rgb = vec3(value);
		}
	}
}"

[sub_resource type="ShaderMaterial" id=17]
shader = SubResource( 16 )
shader_param/value = 1.0

[sub_resource type="StyleBoxEmpty" id=18]

[sub_resource type="StyleBoxEmpty" id=19]

[sub_resource type="StyleBoxEmpty" id=20]

[sub_resource type="StyleBoxEmpty" id=21]

[sub_resource type="StyleBoxEmpty" id=22]

[sub_resource type="SpriteFrames" id=23]
animations = [ {
"frames": [ ExtResource( 9 ), ExtResource( 7 ), ExtResource( 6 ), ExtResource( 5 ), ExtResource( 8 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[node name="OfficeScreen" type="CanvasLayer"]
script = ExtResource( 3 )

[node name="EntireScreen" type="ColorRect" parent="."]
margin_left = -3.0
margin_right = 1280.0
margin_bottom = 720.0
color = Color( 0.258824, 0.258824, 0.258824, 1 )

[node name="Top" type="ColorRect" parent="."]
margin_right = 1280.0
margin_bottom = 85.0
color = Color( 0.462745, 0.462745, 0.462745, 1 )

[node name="QuitOffice" type="Button" parent="."]
material = SubResource( 17 )
margin_left = 1206.0
margin_top = 16.0
margin_right = 1254.0
margin_bottom = 64.0
rect_scale = Vector2( 1, 1.005 )
custom_styles/hover = SubResource( 18 )
custom_styles/pressed = SubResource( 19 )
custom_styles/focus = SubResource( 20 )
custom_styles/disabled = SubResource( 21 )
custom_styles/normal = SubResource( 22 )
icon = ExtResource( 1 )
icon_align = 1

[node name="OfficeLabel" type="Label" parent="."]
margin_right = 1280.0
margin_bottom = 81.0
custom_colors/font_color_shadow = Color( 0, 0, 0, 1 )
custom_constants/shadow_offset_x = 5
custom_constants/shadow_offset_y = 5
custom_fonts/font = ExtResource( 2 )
text = "Office"
align = 1
valign = 1

[node name="TextureRect" type="TextureRect" parent="."]
margin_left = -28.0
margin_top = 81.0
margin_right = 1138.0
margin_bottom = 724.0
rect_scale = Vector2( 1.13, 1 )
texture = ExtResource( 4 )

[node name="Introduction" type="ColorRect" parent="."]
visible = false
margin_top = 80.0
margin_right = 1280.0
margin_bottom = 723.0
color = Color( 1, 1, 1, 0.705882 )

[node name="DialogueBox" type="ColorRect" parent="Introduction"]
margin_left = 117.0
margin_top = 414.0
margin_right = 1039.0
margin_bottom = 593.0
color = Color( 0.364706, 0.65098, 0.862745, 1 )

[node name="Teacher" type="AnimatedSprite" parent="Introduction/DialogueBox"]
position = Vector2( 921, -59 )
scale = Vector2( 0.2, 0.2 )
frames = SubResource( 23 )

[node name="Next" type="Button" parent="Introduction/DialogueBox"]
anchor_left = -0.102
anchor_top = -0.587
margin_left = 799.044
margin_top = 224.073
margin_right = 838.0
margin_bottom = 172.0
action_mode = 0
flat = true

[node name="Label" type="Label" parent="Introduction/DialogueBox/Next"]
margin_left = 20.0
margin_top = 5.0
margin_right = 115.0
margin_bottom = 43.0
custom_fonts/font = ExtResource( 11 )
text = "NEXT"
align = 1

[node name="Dialogue" type="RichTextLabel" parent="Introduction/DialogueBox"]
margin_left = 36.0
margin_top = 33.0
margin_right = 713.0
margin_bottom = 153.0
custom_fonts/normal_font = ExtResource( 10 )
text = "Welcome to the Office! Please see the deputy mayor to discover how you can utilize this resource."

[node name="Phone" type="TextureButton" parent="."]
margin_left = 959.0
margin_top = 362.0
margin_right = 1135.0
margin_bottom = 628.0
rect_scale = Vector2( 0.45, 0.4 )
texture_normal = ExtResource( 14 )
texture_pressed = ExtResource( 15 )
texture_hover = ExtResource( 15 )

[node name="PhonePic" type="ColorRect" parent="Phone"]
visible = false
margin_left = -979.0
margin_top = -376.0
margin_right = 307.0
margin_bottom = 348.0
color = Color( 1, 1, 1, 0.705882 )

[node name="TextureRect" type="ColorRect" parent="Phone/PhonePic"]
margin_left = 427.0
margin_top = 104.0
margin_right = 881.0
margin_bottom = 684.0
color = Color( 0.780392, 0.886275, 1, 1 )

[node name="ExitPhone" type="Button" parent="Phone/PhonePic"]
margin_left = 818.0
margin_top = 116.0
margin_right = 870.0
margin_bottom = 162.0
icon = ExtResource( 1 )

[node name="ScrollContainer" type="ScrollContainer" parent="Phone/PhonePic"]
margin_left = 554.0
margin_top = 151.0
margin_right = 754.0
margin_bottom = 642.0
rect_min_size = Vector2( 150, 300 )

[node name="DisplayCharacterCards" type="VBoxContainer" parent="Phone/PhonePic/ScrollContainer"]
margin_right = 150.0
margin_bottom = 300.0
rect_min_size = Vector2( 150, 300 )
script = ExtResource( 12 )

[node name="Computer" type="TextureButton" parent="."]
margin_left = 585.0
margin_top = 240.0
margin_right = 882.0
margin_bottom = 400.0

[node name="ComputerPic" type="ColorRect" parent="Computer"]
visible = false
margin_left = -585.0
margin_top = -241.0
margin_right = 701.0
margin_bottom = 483.0
color = Color( 1, 1, 1, 0.705882 )

[node name="TextureRect" type="ColorRect" parent="Computer/ComputerPic"]
margin_left = 427.0
margin_top = 104.0
margin_right = 881.0
margin_bottom = 684.0
color = Color( 0.780392, 0.886275, 1, 1 )

[node name="ExitComputer" type="Button" parent="Computer/ComputerPic"]
margin_left = 818.0
margin_top = 116.0
margin_right = 870.0
margin_bottom = 162.0
icon = ExtResource( 1 )

[node name="ScrollContainer" type="ScrollContainer" parent="Computer/ComputerPic"]
margin_left = 554.0
margin_top = 151.0
margin_right = 754.0
margin_bottom = 642.0
rect_min_size = Vector2( 150, 300 )

[node name="DisplayActiveSensors" type="VBoxContainer" parent="Computer/ComputerPic/ScrollContainer"]
margin_right = 150.0
margin_bottom = 300.0
rect_min_size = Vector2( 150, 300 )
script = ExtResource( 13 )

[node name="Worker" type="TextureButton" parent="."]
margin_left = 170.0
margin_top = 225.0
margin_right = 364.0
margin_bottom = 480.0

[node name="DialogueBox" type="ColorRect" parent="Worker"]
visible = false
margin_left = -26.0
margin_top = 258.0
margin_right = 896.0
margin_bottom = 437.0
color = Color( 0.364706, 0.65098, 0.862745, 1 )

[node name="WorkerNext" type="Button" parent="Worker/DialogueBox"]
anchor_left = -0.102
anchor_top = -0.587
margin_left = 799.044
margin_top = 224.073
margin_right = 838.0
margin_bottom = 172.0
action_mode = 0
flat = true

[node name="Label" type="Label" parent="Worker/DialogueBox/WorkerNext"]
margin_left = 103.0
margin_top = 9.0
margin_right = 198.0
margin_bottom = 47.0
custom_fonts/font = ExtResource( 11 )
text = "NEXT"
align = 1

[node name="Dialogue" type="RichTextLabel" parent="Worker/DialogueBox"]
margin_left = 89.0
margin_top = 19.0
margin_right = 774.0
margin_bottom = 192.0
custom_fonts/normal_font = ExtResource( 10 )
text = "Hey There! I am the deputy mayor. Responsible for assisting you with anything you may need.
At the office you can vizualize active sensor information by using the computer. 
The phone will let you contact anyone you have previously spoken to. 
 "

[connection signal="button_down" from="QuitOffice" to="." method="_on_QuitOffice_button_down"]
[connection signal="mouse_entered" from="QuitOffice" to="." method="_on_QuitOffice_mouse_entered"]
[connection signal="mouse_exited" from="QuitOffice" to="." method="_on_QuitOffice_mouse_exited"]
[connection signal="pressed" from="QuitOffice" to="." method="_on_QuitOffice_pressed"]
[connection signal="pressed" from="Introduction/DialogueBox/Next" to="." method="_on_Next_pressed"]
[connection signal="pressed" from="Phone" to="." method="_on_Phone_pressed"]
[connection signal="pressed" from="Phone/PhonePic/ExitPhone" to="." method="_on_ExitPhone_pressed"]
[connection signal="pressed" from="Computer" to="." method="_on_Computer_pressed"]
[connection signal="pressed" from="Computer/ComputerPic/ExitComputer" to="." method="_on_ExitComputer_pressed"]
[connection signal="pressed" from="Worker" to="." method="_on_Worker_pressed"]
[connection signal="pressed" from="Worker/DialogueBox/WorkerNext" to="." method="_on_WorkerNext_pressed"]
